/*
 MIT License
*/
(function(){(function(c,w,u){var l,v;v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);l=function(){function d(a,b){this.options=c.extend(!0,{},this.Defaults,b);this.$element=c(a);this.$picker=null;this.$win=c(u);this.$doc=c(w);v?this.options.mobile&&this.initialize():this.initialize()}d.prototype.Defaults={mobile:!1,days:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),
format:"mm-dd-yyyy",prevClass:"rd-datepicker-prev fa-angle-left",nextClass:"rd-datepicker-next fa-angle-right",prevText:"",nextText:"",callbacks:null};d.prototype.initialize=function(){var a;(a=this.$element.attr("type"))&&"date"===a&&this.$element.attr("type","text");this.createPickerDOM().applyHandlers();return this};d.prototype.createPickerDOM=function(){this.$picker=c("<div/>",{"class":"rd-datepicker"}).data("date",new Date).append("<div class='rd-datepicker-header'> <span class='"+this.options.prevClass+
"'>"+this.options.prevText+"</span> <span class='"+this.options.nextClass+"'>"+this.options.nextText+"</span> <div class='rd-datepicker-title'></div> </div><div class='rd-datepicker-body'></div>");this.$element.after(this.$picker);this.refresh();return this};d.prototype.applyHandlers=function(){var a;a=this;a.$element.on("focus",c.proxy(a.open,a));a.$element.on("input change propertychange",c.proxy(a.open,a));a.$doc.find("*").on("focus",function(b){b=b.target;if(b!==a.$element[0]&&b!==a.$picker[0]&&
!c(b).parents(".rd-datepicker").length)return c.proxy(a.close,a)()});a.$picker.on("click",".rd-datepicker-day",a,a.pick);a.$picker.on("click",".rd-datepicker-next",c.proxy(a.next,a));a.$picker.on("click",".rd-datepicker-prev",c.proxy(a.prev,a));a.$doc.on("click",function(b){b=b.target;if(b!==a.$element[0]&&b!==a.$picker[0]&&!c(b).parents(".rd-datepicker").length)return c.proxy(a.close,a)()});return a};d.prototype.next=function(){var a;a=this.$picker.data("date");a=11===a.getMonth()?new Date(a.getFullYear()+
1,0,1):new Date(a.getFullYear(),a.getMonth()+1,1);this.$picker.data("date",a);this.refresh();return this};d.prototype.prev=function(){var a;a=this.$picker.data("date");a=0===a.getMonth()?new Date(a.getFullYear()-1,11,1):new Date(a.getFullYear(),a.getMonth()-1,1);this.$picker.data("date",a);return this.refresh()};d.prototype.open=function(){this.$picker.addClass("rd-datepicker-open");return this};d.prototype.close=function(a){this.$picker.removeClass("rd-datepicker-open");return this};d.prototype.pick=
function(a){var b;a=a.data;b=c(this).addClass("selected").data("date");a.$picker.data("pickedDate",b).find(".rd-datepicker-day").not(this).removeClass("selected");a.$element.val(b.format(a.options.format));a.$element.focus();setTimeout(c.proxy(a.close,a));return this};d.prototype.refresh=function(){var a,b,d,f,e,g,h,k,p,m,l,q,r,t,n;f=this.$picker.data("date");n=new Date;r=this.$picker.data("pickedDate");q=(new Date(f.getFullYear(),f.getMonth()+1,0)).getDate();t=(new Date(f.getFullYear(),f.getMonth(),
0)).getDate();k=(new Date(f.getFullYear(),f.getMonth(),1)).getDay();d=1;n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0);a=c("<table>");b=c("<tr/>");m=this.options.days;g=0;for(p=m.length;g<p;g++)e=m[g],b.append("<th class='rd-datepicker-week'>"+e+"</th>");a.append(b);for(p=m=0;6>=m;p=++m){b=c("<tr/>");for(h=l=0;6>=l;h=++l){e=7*p+h+1;g="rd-datepicker-day";if(0===h&&e>q+k)break;1>e-k?(h=t+e-k,g+=" offset",e=new Date(f.getFullYear(),f.getMonth()-1,t+(e-k))):e<=q+k?(h=e-k,e=new Date(f.getFullYear(),
f.getMonth(),e-k)):(h=d,g+=" offset",e=new Date(f.getFullYear(),f.getMonth()+1,d++));e.valueOf()===n.valueOf()&&(g+=" today");r&&e.valueOf()===r.valueOf()&&(g+=" selected");b.append(c("<td/>",{"class":g,text:h}).data("date",e))}""!==b.html()&&a.append(b)}this.$picker.find(".rd-datepicker-title").text(this.options.months[f.getMonth()]+" "+f.getFullYear()).end().find(".rd-datepicker-body").html(a);return this};return d}();c.fn.extend({RDDatePicker:function(d){return this.each(function(){var a;a=c(this);
if(!a.data("RDDatePicker"))return a.data("RDDatePicker",new l(this,d))})}});return u.RDDatePicker=l})(window.jQuery,document,window);"undefined"!==typeof module&&null!==module?module.exports=window.RDDatePicker:"function"===typeof define&&define.amd&&define(["jquery"],function(){return window.RDDatePicker})}).call(this);
